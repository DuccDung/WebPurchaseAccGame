@using SystemPurchaseAccGame.ViewModel
@model List<GameCategoryVm>
@{
    Layout = "~/Views/Shared/_ClientLayout.cshtml";
}
<style>
    /* Base CTA (nếu bạn muốn đồng bộ luôn cho nút thường) */
    .acc-card__cta {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        min-height: 40px;
        padding: 10px 14px;
        border-radius: 12px;
        font-weight: 700;
        text-decoration: none;
        user-select: none;
        transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
    }

    /* Nút HẾT HÀNG */
    .acc-card__cta--soldout {
        pointer-events: none;
        cursor: not-allowed;
        opacity: .75;
        border: 1px solid rgba(0, 0, 0, .12);
        color: rgb(0 0 0 / 63%);
        box-shadow: none;
        background: #222121;
    }

        .acc-card__cta--soldout .cta__icon {
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: rgba(0,0,0,.06);
            font-size: 14px;
        }

        .acc-card__cta--soldout .cta__text {
            letter-spacing: .2px;
            font-size: 14px;
        }

</style>
<main class="main">
    @foreach (var cat in Model)
    {
        <section class="sectionTitle" aria-label="@cat.Name">
            <h1>@cat.Name</h1>
            <div class="underline" aria-hidden="true"></div>
        </section>

        <section class="productsGrid" aria-label="Danh sách acc">
            @foreach (var game in cat.Games)
            {
                var isSoldOut = game.RemainingCount == 0;
                <div class="acc-card">
                    <div class="acc-card__media">
                        <img src="@(string.IsNullOrWhiteSpace(game.ThumbnailUrl) ? "https://via.placeholder.com/600x400" : game.ThumbnailUrl)"
                             alt="@game.Name"
                             loading="lazy" />
                    </div>

                    <div class="acc-card__body">
                        <p class="acc-card__title">@game.Name</p>
                        <p class="acc-card__line">Đã bán: <strong>@game.SoldCount</strong></p>
                        <p class="acc-card__line">Còn lại: <strong>@game.RemainingCount</strong></p>
                    </div>
                    @if (game.RemainingCount == 0)
                    {
                        <a class="acc-card__cta acc-card__cta--soldout"
                           href="javascript:void(0)"
                           aria-disabled="true"
                           tabindex="-1"
                           aria-label="Hết hàng">
                            <span class="cta__icon" aria-hidden="true">⛔</span>
                            <span class="cta__text">Hết hàng</span>
                        </a>

                    }
                    else
                    {
                        <a class="acc-card__cta"
                           asp-controller="Home"
                           asp-action="GameDetail"
                           asp-route-id="@game.GameId"
                           aria-label="Xem tất cả">
                            <img src="~/img/btn-view-all.gif" alt="Xem tất cả" loading="lazy" />
                        </a>
                    }
                   
                </div>
            }
        </section>
    }
</main>
